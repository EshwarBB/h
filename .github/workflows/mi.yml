name: SSH Test Workflow

on:
  push:
    branches:
      - main

jobs:
  ssh-test:
    runs-on: ubuntu-latest

    steps:
      - name: Create SSH private key
        run: |
          cat > vm_key.pem << 'EOF'
-----BEGIN OPENSSH PRIVATE KEY-----
b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW
QyNTUxOQAAACBJrezAIFi7fBoYLGyCAirQf/TahIISuPVykWvyRO8CpgAAAKAHeNftB3jX
7QAAAAtzc2gtZWQyNTUxOQAAACBJrezAIFi7fBoYLGyCAirQf/TahIISuPVykWvyRO8Cpg
AAAED+XxZoEJvQG7Dkldk2FGcnQtXII0ZZAcRhNswNDURK+Emt7MAgWLt8GhgsbIICKtB/
9NqEghK49XKRa/JE7wKmAAAAHGVzaHdhckBtaWRkbGV3YXJldGFsZW50cy5jb20B
-----END OPENSSH PRIVATE KEY-----

EOF
          chmod 600 vm_key.pem

      - name: Test SSH connection
        run: |
          ssh -o StrictHostKeyChecking=no -i vm_key.pem username@your_vm_ip 'echo Connection Successful'
